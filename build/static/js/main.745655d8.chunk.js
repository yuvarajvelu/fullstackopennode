(this["webpackJsonppart2.2"]=this["webpackJsonppart2.2"]||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),r=n.n(o),u=(n(20),n(4)),l=n(2),i=function(e){return c.a.createElement("div",null,"filter shown with: ",c.a.createElement("input",{onChange:e.handleFilter}))},m=function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:e.newName,onChange:e.handleName})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:e.newNumber,onChange:e.handleNumber})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.newFilter,n=e.newNotMatched,a=e.persons,o=e.handleDelete;return c.a.createElement("div",null,0===t.length&&0===n.length&&a.map((function(e){return c.a.createElement("p",{key:e.contact_name},e.contact_name," ",e.contact_number,c.a.createElement("button",{onClick:function(){return o(e)}},"delete"))})),0!==t.length&&t.map((function(e){return c.a.createElement("p",{key:e.contact_name},e.contact_name," ",e.contact_number,c.a.createElement("button",{onClick:function(){return o(e)}},"delete"))})))},f=n(3),s=n.n(f),h="/api/persons",b=function(){return s.a.get(h).then((function(e){return e.data}))},p=function(e){return s.a.post(h,e).then((function(e){return e.data}))},g=function(e){return s.a.delete("".concat(h,"/").concat(e)),alert("Contact deleted")},E=function(e,t){return s.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},_=function(e){var t=e.message;return null===t?null:c.a.createElement("div",{style:t.search(/[deleted|error|failed]/)>=0?{color:"red",borderStyle:"solid",borderRadius:5,padding:10,fontSize:20,background:"lightgrey"}:{color:"green",borderStyle:"solid",borderRadius:5,padding:10,fontSize:20,background:"lightgrey"}},t)},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),f=Object(l.a)(r,2),s=f[0],h=f[1],w=Object(a.useState)(""),v=Object(l.a)(w,2),O=v[0],j=v[1],y=Object(a.useState)([]),k=Object(l.a)(y,2),S=k[0],N=k[1],C=Object(a.useState)(""),D=Object(l.a)(C,2),F=D[0],M=D[1],R=Object(a.useState)(null),T=Object(l.a)(R,2),x=T[0],z=T[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var B="";return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(_,{message:x}),c.a.createElement(i,{handleFilter:function(e){if(B+=e.target.value,N([].push(B)),0!==B.length){var t=n.reduce((function(e,t){return t.contact_name.search(new RegExp(B,"gi"))>=0?e.push(t):M(B),e}),[]);N(t)}else N([]),M("")}}),c.a.createElement("h2",null,"Add a new contact"),c.a.createElement(m,{handleSubmit:function(e){e.preventDefault();var t={contact_name:s,contact_number:O},a=n.reduce((function(e,n){if(n.contact_name===t.contact_name){if(n.contact_number===t.contact_number)return 0;e=2}return e}),1);if(""===t.contact_name||""===t.contact_number)alert("Empty fields");else if(2===a){if(window.confirm("".concat(t.contact_name," is already in the phonebook. Do you want to replace the old number with new number?"))){var c=n.find((function(e){return e.contact_name===t.contact_name})),r=Object(u.a)(Object(u.a)({},c),{},{contact_number:t.contact_number});E(c.id,r).then((function(e){return o(n.map((function(t){return t.contact_name!==c.contact_name?t:e})))})).catch((function(){z("Information of ".concat(r.contact_name," has already been deleted on the server")),setTimeout((function(){z(null)}),5e3),o(n.filter((function(e){return e.contact_name!==r.contact_name})))}))}}else 0===a?alert("".concat(s," is already added to the phonebook")):p(t).then((function(e){o(n.concat(e)),z("".concat(e.contact_name," is added to the phonebook")),setTimeout((function(){z(null)}),5e3)})).catch((function(e){z(e.response.data.error),setTimeout((function(){z(null)}),5e3)}));h(""),j("")},newName:s,newNumber:O,handleName:function(e){h(e.target.value)},handleNumber:function(e){j(e.target.value)}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(d,{newFilter:S,newNotMatched:F,persons:n,handleDelete:function(e){window.confirm("Delete ".concat(e.contact_name,"?"))?(o(n.filter((function(t){return t.contact_name!==e.contact_name}))),g(e.id)):alert("Operation cancelled")}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.745655d8.chunk.js.map